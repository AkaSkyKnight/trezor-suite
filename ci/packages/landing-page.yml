# landing-page build:
#   stage: build
#   script:
#     - assetPrefix=/suite-web/${CI_BUILD_REF_NAME} yarn workspace @trezor/landing-page build
#   artifacts:
#     expire_in: 7 days
#     paths:
#       - packages/landing-page/build

# landing-page deploy dev:
#   stage: deploy to dev servers
#   variables:
#     DEPLOY_DIRECTORY: ${DEPLOY_BASE_DIR}/suite-web/${CI_BUILD_REF_NAME}
#   dependencies:
#     - landing-page build
#   environment:
#     name: ${CI_BUILD_REF_NAME}
#     url: $BASE_REVIEW_URL/${CI_BUILD_REF_NAME}
#   before_script: []
#   script:
#     - cd packages/landing-page
#     - echo "Deploy to dev servers"
#     - mkdir -p ${DEPLOY_BASE_DIR}/landing-page
#     - mkdir -p ${DEPLOY_DIRECTORY} # create build folder
#     - rsync --delete -va build/ "${DEPLOY_DIRECTORY}/"
#   tags:
#     - deploy

landing-page deploy staging:
  stage: deploy to staging
  dependencies: 
      - install and build
  # environment:
  #     name: ${CI_BUILD_REF_NAME}-staging
  #     url: ${STAGING_SERVER_URL}
  # before_script: []
  # when:
  #     manual
  script:
      # - echo "Deploy to staging servers"
      - yarn workspace @trezor/landing-page build
      - cd packages/landing-page
      - ./scripts/s3sync.sh stage beta
  # tags:
  #     - deploy